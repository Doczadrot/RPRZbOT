# üöÇ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Serverless —Ä–µ–∂–∏–º–∞ –¥–ª—è Railway Free Plan

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

Railway Free Plan —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É–µ—Ç **serverless —Ä–µ–∂–∏–º** –¥–ª—è –≤—Å–µ—Ö –¥–µ–ø–ª–æ–µ–≤. –≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ serverless —Ä–µ–∂–∏–º–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º webhook –≤–º–µ—Å—Ç–æ polling.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Railway

–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Railway Dashboard ‚Üí Variables:

```
BOT_TOKEN=your_telegram_bot_token_here
ADMIN_CHAT_ID=your_admin_chat_id_here
RAILWAY_PUBLIC_DOMAIN=your-app-name.up.railway.app
```

**–í–∞–∂–Ω–æ:** `RAILWAY_PUBLIC_DOMAIN` –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Railway –ø–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è Public Domain.

### 2. –í–∫–ª—é—á–µ–Ω–∏–µ Public Domain

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Railway Dashboard ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å ‚Üí Settings
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "Networking"
3. –í–∫–ª—é—á–∏—Ç–µ **Public Domain**
4. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –¥–æ–º–µ–Ω –≤–∏–¥–∞ `your-app-name.up.railway.app`
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç –¥–æ–º–µ–Ω –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∫–∞–∫ `RAILWAY_PUBLIC_DOMAIN`

### 3. –í–∫–ª—é—á–µ–Ω–∏–µ Serverless —Ä–µ–∂–∏–º–∞

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Railway Dashboard ‚Üí –≤–∞—à —Å–µ—Ä–≤–∏—Å ‚Üí Settings
2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "Deploy"
3. –í–∫–ª—é—á–∏—Ç–µ **Serverless** —Ñ–ª–∞–≥
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Webhook

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤:

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
export BOT_TOKEN=your_token
export RAILWAY_PUBLIC_DOMAIN=your-app-name.up.railway.app

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç
python setup_webhook.py
```

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ API (–∏–∑ Railway)

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –æ—Ç–ø—Ä–∞–≤—å—Ç–µ POST –∑–∞–ø—Ä–æ—Å:

```bash
curl -X POST https://your-app-name.up.railway.app/set_webhook \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-app-name.up.railway.app/webhook"}'
```

#### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ Telegram Bot API –Ω–∞–ø—Ä—è–º—É—é

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setWebhook" \
  -H "Content-Type: application/json" \
  -d '{"url": "https://your-app-name.up.railway.app/webhook"}'
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **Health Check:**
   ```bash
   curl https://your-app-name.up.railway.app/health
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ Webhook:**
   ```bash
   curl "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/getWebhookInfo"
   ```

3. **–¢–µ—Å—Ç –±–æ—Ç–∞:**
   –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É –≤ Telegram

## üîç –û—Ç–ª–∏—á–∏—è –æ—Ç Polling —Ä–µ–∂–∏–º–∞

| Polling (—Å—Ç–∞—Ä—ã–π) | Webhook (serverless) |
|------------------|---------------------|
| –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ | –ó–∞–ø—Ä–æ—Å—ã –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é |
| –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ |
| –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Free Plan | –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Free Plan |
| `bot.polling()` | Flask + `/webhook` endpoint |

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Public Domain –≤–∫–ª—é—á–µ–Ω
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `RAILWAY_PUBLIC_DOMAIN` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway Dashboard
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `curl "https://api.telegram.org/bot<TOKEN>/getWebhookInfo"`

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/health` endpoint
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `BOT_TOKEN` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ webhook URL –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ

### 404 –Ω–∞ /webhook

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `main_webhook.py` (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `railway.json`)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `PORT`

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

- `bot/main_webhook.py` - Serverless –≤–µ—Ä—Å–∏—è —Å Flask webhook
- `bot/main.py` - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å polling (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- `railway.json` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Railway (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `main_webhook.py`)
- `Procfile` - –ü—Ä–æ—Ü–µ—Å—Å –¥–ª—è Railway (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `main_webhook.py`)
- `setup_webhook.py` - –°–∫—Ä–∏–ø—Ç –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ webhook

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

- [ ] Public Domain –≤–∫–ª—é—á–µ–Ω –≤ Railway
- [ ] Serverless —Ä–µ–∂–∏–º –≤–∫–ª—é—á–µ–Ω
- [ ] –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [ ] Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] `/health` endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200
- [ ] –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã –≤ Telegram

